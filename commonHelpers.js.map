{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = ''; \n\n    // Перевіряємо, чи images є об'єктом з властивістю hits\n    if (images && images.hits && Array.isArray(images.hits)) {\n        const slicedImages = images.hits.slice(0, 9);\n        \n        slicedImages.forEach(image => {\n            const cardLink = document.createElement('a');\n            cardLink.href = image.largeImageURL;\n            cardLink.rel = \"noopener noreferrer\";\n            cardLink.classList.add('card');\n\n            const img = document.createElement('img');\n            img.src = image.webformatURL;\n            img.alt = image.tags;\n\n            const metricsRow = document.createElement('div');\n            metricsRow.classList.add('metrics');\n\n            const likesContainer = createMetricContainer('Likes', image.likes);\n            const viewsContainer = createMetricContainer('Views', image.views);\n            const commentsContainer = createMetricContainer('Comments', image.comments);\n            const downloadsContainer = createMetricContainer('Downloads', image.downloads);\n\n            metricsRow.appendChild(likesContainer);\n            metricsRow.appendChild(viewsContainer);\n            metricsRow.appendChild(commentsContainer);\n            metricsRow.appendChild(downloadsContainer);\n\n            cardLink.appendChild(img);\n            cardLink.appendChild(metricsRow);\n\n            gallery.appendChild(cardLink);\n        });\n     \n    } else {\n        console.error('Invalid images data:', images);\n    }\n}\n\n// Функція для створення контейнера з текстом та числовим значенням\nfunction createMetricContainer(label, value) {\n    const container = document.createElement('div');\n    container.classList.add('metric-container');\n\n    const labelSpan = document.createElement('span');\n    labelSpan.textContent = label;\n    labelSpan.classList.add('metric-label');\n    labelSpan.style.fontWeight = 'bold'; \n    container.appendChild(labelSpan);\n\n    const valueSpan = document.createElement('span');\n    valueSpan.textContent = value;\n    valueSpan.classList.add('metric-value');\n    container.appendChild(valueSpan);\n\n    return container;\n}\n\n// Функція для показу індикатора завантаження\nexport function showLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    loadingIndicator.textContent = 'Loading images, please wait...';\n    loadingIndicator.style.display = 'block';\n}\n\nexport function hideLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    loadingIndicator.style.display = 'none';\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}","'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { renderImages, showLoadingIndicator, hideLoadingIndicator, clearGallery } from \"./render-functions\";\n\n\nconst KEY = '42598538-444db408f0d8256d557c709b2';\nconst BASE_URI = 'https://pixabay.com/api/';\n\n// Функція для виконання HTTP-запиту до API Pixabay\n\nexport async function searchImages(keyword) {\n    const url = `${BASE_URI}?key=${KEY}&q=${encodeURIComponent(keyword)}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    try {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error('HTTP Error: ' + response.status);\n        }\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        throw new Error('Error fetching images: ' + error.message);\n    }\n}\n\n\nexport async function handleSubmit(event) {\n    event.preventDefault();\n\n    showLoadingIndicator();\n    clearGallery();\n\n    const searchInput = document.querySelector('.search-form input[type=\"text\"]');\n    const query = searchInput.value.trim();\n\n    if (query === '') {\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Будь ласка, введіть текст для пошуку',\n            position: 'topCenter',\n        });\n        hideLoadingIndicator();\n        return;\n    }\n\n    try {\n        const images = await searchImages(query);\n\n        if (images.hits.length === 0) {\n            iziToast.warning({\n                title: 'Увага',\n                message: 'Вибачте, результатів пошуку не знайдено. Спробуйте інший запит.',\n                position: 'topCenter',\n            });\n            } else {\n            renderImages(images);\n        }\n    } catch (error) {\n        console.error(error.message);\n        iziToast.error({\n            title: 'Помилка',\n            message: 'Під час виконання запиту сталася помилка. Будь ласка, спробуйте ще раз.',\n            position: 'topCenter',\n        });\n    } finally {\n        \n        hideLoadingIndicator();\n    }\n}\n\n","'use strict';\n\nimport { searchImages, handleSubmit } from \"./js/pixabay-api\";\nimport { renderImages, showLoadingIndicator, hideLoadingIndicator } from \"./js/render-functions\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\n    const searchForm = document.querySelector('.search-form');\n\n    // Додавання обробника події натискання на кнопку відправки форми\n    searchForm.addEventListener('submit', async function(event) {\n        event.preventDefault();\n        await handleSubmit(event);\n    });\n\n    // Підготовка галереї\n    const gallery = new SimpleLightbox('.gallery a', {\n        captionDelay: 250\n    });\n\n    // Функція для оновлення галереї після додавання нових елементів\n    function updateGallery() {\n        gallery.refresh();\n    }\n\n    // Обробник події натискання на кнопку відправки форми\n    async function handleFormSubmit(event) {\n        event.preventDefault();\n\n        const searchInput = document.querySelector('.search-form input[type=\"text\"]');\n        const query = searchInput.value.trim();\n\n        if (query === '') {\n            iziToast.error({\n                title: 'Помилка',\n                message: 'Будь ласка, введіть текст для пошуку',\n                position: 'topCenter',\n            });\n            return;\n        }\n\n        try {\n            const imagesData = await searchImages(query);\n\n            if (imagesData.hits.length === 0) {\n                iziToast.warning({\n                    title: 'Увага',\n                    message: 'Вибачте, результатів пошуку не знайдено. Спробуйте інший запит.',\n                    position: 'topCenter',\n                });\n                return;\n            }\n\n            // Відображення зображень на сторінці\n            renderImages(imagesData);\n\n            updateGallery();\n        } catch (error) {\n            console.error(error.message);\n            iziToast.error({\n                title: 'Помилка',\n                message: 'Під час виконання запиту сталася помилка. Будь ласка, спробуйте ще раз.',\n                position: 'topCenter',\n            });\n        }\n    }\n    const defaultQuery = 'your_default_query_here'; \n    const imagesData = await searchImages(defaultQuery);\n\n    renderImages(imagesData);\n    updateGallery();\n});\n\n"],"names":["renderImages","images","gallery","image","cardLink","img","metricsRow","likesContainer","createMetricContainer","viewsContainer","commentsContainer","downloadsContainer","label","value","container","labelSpan","valueSpan","showLoadingIndicator","loadingIndicator","hideLoadingIndicator","clearGallery","KEY","BASE_URI","searchImages","keyword","url","response","error","handleSubmit","event","query","iziToast","SimpleLightbox","updateGallery","imagesData"],"mappings":"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"}